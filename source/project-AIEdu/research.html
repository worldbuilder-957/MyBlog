---
layout: false
---
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç ”ä¸€ç ” - åœ°ç†ç ”è®¨</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        .subpage-content {
            background: #fff;
            border-radius: 15px;
            padding: 40px;
            margin-top: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #9b59b6;
            text-decoration: none;
            font-size: 16px;
        }
        .back-link:hover {
            text-decoration: underline;
        }
        .subpage-title {
            color: #9b59b6;
            margin-bottom: 20px;
            font-size: 28px;
        }
        .subpage-section {
            margin-bottom: 30px;
        }
        .subpage-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
        }
        .subpage-section p {
            color: #666;
            line-height: 1.8;
            margin-bottom: 15px;
        }
        .ai-chat-interface {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #9b59b6;
        }
        .chat-bubble {
            max-width: 80%;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
        }
        .chat-bubble.ai {
            background: #9b59b6;
            color: white;
            align-self: flex-start;
            margin-right: auto;
        }
        .chat-bubble.user {
            background: #ecf0f1;
            color: #333;
            align-self: flex-end;
            margin-left: auto;
        }
        .theme-list {
            list-style-type: none;
        }
        .theme-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #9b59b6;
        }
        .chat-container {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #9b59b6;
            max-height: 600px;
            display: flex;
            flex-direction: column;
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 15px;
            min-height: 300px;
            max-height: 400px;
        }
        .message {
            margin-bottom: 15px;
            display: flex;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .message.ai {
            justify-content: flex-start;
        }
        .message.user {
            justify-content: flex-end;
        }
        .message-content {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.5;
        }
        .message.ai .message-content {
            background: #9b59b6;
            color: white;
            border-bottom-left-radius: 4px;
        }
        .message.ai .message-content * {
            color: white !important;
        }
        .message.user .message-content {
            background: #ecf0f1;
            color: #333;
            border-bottom-right-radius: 4px;
        }
        .message-content.markdown {
            line-height: 1.6;
        }
        .message-content.markdown h1,
        .message-content.markdown h2,
        .message-content.markdown h3,
        .message-content.markdown h4 {
            margin-top: 1em;
            margin-bottom: 0.5em;
            font-weight: bold;
            color: white;
        }
        .message-content.markdown h1 { font-size: 1.5em; }
        .message-content.markdown h2 { font-size: 1.3em; }
        .message-content.markdown h3 { font-size: 1.1em; }
        .message-content.markdown h4 { font-size: 1em; }
        .message-content.markdown p {
            margin: 0.5em 0;
            color: white;
        }
        .message-content.markdown ul,
        .message-content.markdown ol {
            margin: 0.5em 0;
            padding-left: 1.5em;
        }
        .message-content.markdown li {
            margin: 0.3em 0;
            color: white;
        }
        .message-content.markdown strong {
            font-weight: bold;
            color: white;
        }
        .message-content.markdown em {
            font-style: italic;
            color: white;
        }
        .message-content.markdown a {
            color: white;
            text-decoration: underline;
        }
        .message-content.markdown a:hover {
            color: rgba(255, 255, 255, 0.8);
        }
        .message-content.markdown code {
            background: rgba(0, 0, 0, 0.2);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: white;
        }
        .message-content.markdown pre {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 0.5em 0;
        }
        .message-content.markdown pre code {
            background: none;
            padding: 0;
            color: white;
        }
        .message-content.markdown blockquote {
            border-left: 3px solid rgba(255, 255, 255, 0.5);
            padding-left: 1em;
            margin: 0.5em 0;
            opacity: 0.9;
            color: white;
        }
        .message-content.markdown hr {
            border: none;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            margin: 1em 0;
        }
        .message-content.markdown span,
        .message-content.markdown div {
            color: white;
        }
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }
        .chat-input:focus {
            border-color: #9b59b6;
        }
        .send-button {
            padding: 12px 24px;
            background: #9b59b6;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        .send-button:hover {
            background: #8e44ad;
        }
        .send-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        .role-selection-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 40px;
            margin: 20px 0;
            border-left: 4px solid #9b59b6;
            text-align: center;
        }
        .role-cards {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .role-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
            width: 250px;
            border: 2px solid transparent;
        }
        .role-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #9b59b6;
        }
        .role-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 style="color: #fff; margin-bottom: 20px; font-size: 32px;"><strong>æ•™å­¦èµ„æºå·¥å…·ç®±</strong></h1>
            <p>é€šè¿‡å¤šå…ƒåŒ–çš„å­¦ä¹ æ–¹å¼ï¼Œæ·±å…¥ç†è§£æ˜¼å¤œäº¤æ›¿ï¼Œåœ°çƒå…¬è½¬ï¼Œè‡ªè½¬ç­‰è‡ªç„¶ç°è±¡ï¼Œæå‡åœ°ç†<br>ç§‘å­¦ç´ å…»</p>
        </div>
        
        <div class="subpage-content">
            <a href="index.html" class="back-link">â† è¿”å›ä¸»é¡µé¢</a>
            <h2 class="subpage-title">ğŸ” ç ”ä¸€ç ” - åœ°ç†ç ”è®¨</h2>
            
            <div class="subpage-section">
                <h3>åŠŸèƒ½ä»‹ç»</h3>
                <p>æœ¬æ¨¡å—æä¾›AIæ™ºèƒ½å¯¹è¯åŠŸèƒ½ï¼Œå­¦ç”Ÿå¯ä»¥ä¸AIè¿›è¡Œæ·±åº¦äº¤æµï¼Œæ¢è®¨åœ°çƒè¿åŠ¨ã€æ˜¼å¤œäº¤æ›¿ã€å››å­£å˜åŒ–ç­‰è‡ªç„¶ç°è±¡çš„ç§‘å­¦åŸç†å’Œç›¸å…³çŸ¥è¯†ï¼Œå¸®åŠ©å­¦ç”Ÿæ›´æ·±å…¥åœ°ç†è§£åœ°çƒè¿åŠ¨è§„å¾‹åŠå…¶å¯¹è‡ªç„¶ç¯å¢ƒçš„å½±å“ã€‚</p>
            </div>
            
            <div class="subpage-section">
                <h3>AIæ™ºèƒ½å¯¹è¯ - èº«ä»½é€‰æ‹©</h3>
                
                <!-- èº«ä»½é€‰æ‹©ç•Œé¢ -->
                <div id="roleSelection" class="role-selection-container">
                    <h3>è¯·é€‰æ‹©æ‚¨çš„èº«ä»½ä»¥å¼€å§‹å¯¹è¯</h3>
                    <div class="role-cards">
                        <div class="role-card" onclick="selectRole('student')">
                            <div class="role-icon">ğŸ“</div>
                            <h4>æˆ‘æ˜¯å­¦ç”Ÿ</h4>
                            <p>æ¢ç´¢åœ°çƒå¥¥ç§˜ï¼Œè§£ç­”å­¦ä¹ ç–‘æƒ‘</p>
                        </div>
                        <div class="role-card" onclick="selectRole('teacher')">
                            <div class="role-icon">ğŸ‘©â€ğŸ«</div>
                            <h4>æˆ‘æ˜¯è€å¸ˆ</h4>
                            <p>è·å–å¤‡è¯¾èµ„æºï¼Œè®¾è®¡æ•™å­¦æ´»åŠ¨</p>
                        </div>
                    </div>
                </div>

                <!-- èŠå¤©ç•Œé¢ (åˆå§‹éšè—) -->
                <div id="chatContainer" class="chat-container" style="display: none;">
                    <div class="chat-messages" id="chatMessages">
                    </div>
                    <div class="chat-input-container">
                        <input type="text" class="chat-input" id="chatInput" placeholder="è¾“å…¥ä½ çš„é—®é¢˜æˆ–æƒ³æ³•..." />
                        <button class="send-button" id="sendButton" onclick="sendMessage()">å‘é€</button>
                    </div>
                </div>
            </div>
            
            <div class="subpage-section">
                <h3>æ¨èç ”è®¨ä¸»é¢˜</h3>
                <ul class="theme-list">
                    <li class="theme-item">
                        <strong>1. åœ°çƒè‡ªè½¬ä¸æ˜¼å¤œäº¤æ›¿çš„å…³ç³»</strong>
                        <p>åˆ†æåœ°çƒè‡ªè½¬å¦‚ä½•å¯¼è‡´æ˜¼å¤œäº¤æ›¿ç°è±¡ï¼Œä»¥åŠä¸åŒçº¬åº¦çš„æ˜¼å¤œå˜åŒ–ç‰¹ç‚¹</p>
                    </li>
                    <li class="theme-item">
                        <strong>2. åœ°çƒå…¬è½¬ä¸å››å­£å˜åŒ–çš„å…³è”</strong>
                        <p>æ¢è®¨åœ°çƒå…¬è½¬å¦‚ä½•å¯¼è‡´å››å­£æ›´æ›¿ï¼Œä»¥åŠé»„èµ¤äº¤è§’çš„é‡è¦ä½œç”¨</p>
                    </li>
                    <li class="theme-item">
                        <strong>3. æ˜¼å¤œé•¿çŸ­å˜åŒ–çš„åœ°ç†æ„ä¹‰</strong>
                        <p>ä»ä¸åŒè§’åº¦è§£è¯»æ˜¼å¤œé•¿çŸ­å˜åŒ–å¯¹åœ°ç†ç¯å¢ƒå’Œäººç±»æ´»åŠ¨çš„å½±å“</p>
                    </li>
                </ul>
            </div>
            
            <div class="subpage-section">
                <h3>ä½¿ç”¨å»ºè®®</h3>
                <p>1. å‡†å¤‡å¥½å…·ä½“çš„åœ°ç†é—®é¢˜æˆ–è§‚ç‚¹åå†å¼€å§‹å¯¹è¯</p>
                <p>2. ç»“åˆåœ°çƒè¿åŠ¨çš„åŸç†è¿›è¡Œæ·±å…¥æ¢è®¨</p>
                <p>3. è®°å½•ä¸‹æœ‰ä»·å€¼çš„ç ”è®¨å†…å®¹ï¼Œç”¨äºè¯¾åå¤ä¹ å’Œåœ°ç†çŸ¥è¯†å·©å›º</p>
            </div>
        </div>
    </div>

    <script>
        // DeepSeek API é…ç½®ï¼ˆè¯·è‡ªè¡Œè¡¥å……ï¼‰
        const DEEPSEEK_API_URL = 'https://api.deepseek.com/v1/chat/completions'; // è¯·å¡«å†™ DeepSeek API æ¥å£åœ°å€
        const DEEPSEEK_API_KEY = 'sk-64e582e67c9e4f7b89e67602b6670c4d'; // è¯·å¡«å†™ä½ çš„ API Key
        
        const STUDENT_PROMPT = `# Role: åœ°çƒç§‘å­¦æ¢ç´¢å‘å¯¼

## 1. è§’è‰²å®šä½
ä½ æ˜¯ä¸€ä½é€»è¾‘æ¸…æ™°ã€çŸ¥è¯†æ¸Šåšä¸”å–„äºå¼•å¯¼çš„â€œåœ°çƒç§‘å­¦æ¢ç´¢å‘å¯¼â€ã€‚
ä½ çš„æœåŠ¡å¯¹è±¡æ˜¯**å°å­¦å…­å¹´çº§å­¦ç”Ÿ**ã€‚è¿™ä¸ªé˜¶æ®µçš„å­¦ç”Ÿå·²ç»å…·å¤‡ä¸€å®šçš„ç©ºé—´æƒ³è±¡åŠ›ï¼Œæ­£åœ¨å­¦ä¹ æ›´ç³»ç»Ÿçš„åœ°çƒè¿åŠ¨çŸ¥è¯†ã€‚
ä½ çš„ä»»åŠ¡æ˜¯è§£ç­”å…³äºåœ°çƒè‡ªè½¬ï¼ˆæ˜¼å¤œäº¤æ›¿ã€æ—¶å·®ï¼‰ã€å…¬è½¬ï¼ˆå››å­£å˜åŒ–ã€å¤ªé˜³é«˜åº¦è§’ï¼‰ç­‰æ ¸å¿ƒè€ƒç‚¹é—®é¢˜ï¼Œå¸®åŠ©ä»–ä»¬å»ºç«‹å‡†ç¡®çš„ç©ºé—´æ¨¡å‹ã€‚

## 2. æ ¸å¿ƒåŸåˆ™
- **ä¸“ä¸šä¸é€šä¿—å¹¶é‡**ï¼šå¿…é¡»ä½¿ç”¨æ ‡å‡†çš„ç§‘å­¦æœ¯è¯­ï¼ˆå¦‚ï¼šåœ°è½´ã€æ™¨æ˜çº¿ã€å…¬è½¬è½¨é“ã€ç›´å°„/æ–œå°„ï¼‰ï¼Œä½†åœ¨æœ¯è¯­åç´§è·Ÿç”Ÿæ´»åŒ–çš„è§£é‡Šã€‚
- **å¼ºåŒ–ç©ºé—´é€»è¾‘**ï¼šå…­å¹´çº§ç§‘å­¦çš„éš¾ç‚¹åœ¨äºâ€œç©ºé—´ä½ç½®å…³ç³»â€ã€‚åœ¨è§£é‡Šæ—¶ï¼Œè¦å¼ºè°ƒ**æ–¹å‘**ï¼ˆè‡ªè¥¿å‘ä¸œï¼‰å’Œ**è§’åº¦**ï¼ˆåœ°è½´å€¾æ–œï¼‰ã€‚
- **å¯å‘å¼æ•™å­¦**ï¼šä¸è¦åªç»™ç»“è®ºï¼Œè¦å¼•å¯¼å­¦ç”Ÿæ€è€ƒâ€œå› æœå…³ç³»â€ã€‚ä¾‹å¦‚ï¼šâ€œå¦‚æœåœ°è½´ä¸å€¾æ–œï¼Œä¸–ç•Œä¼šå˜æˆä»€ä¹ˆæ ·ï¼Ÿâ€
- **å›¾æ–‡ç»“åˆçš„è¯­è¨€æ„Ÿ**ï¼šç”¨æ–‡å­—æè¿°å‡ºç”»é¢æ„Ÿï¼Œè¾…åŠ©å­¦ç”Ÿåœ¨è„‘æµ·ä¸­æ„å»ºâ€œä¸‰çƒæ¨¡å‹â€ï¼ˆæ—¥ã€åœ°ã€æœˆï¼‰ã€‚

## 3. å›ç­”é€»è¾‘ (æ€ç»´é“¾)

é’ˆå¯¹å…­å¹´çº§å­¦ç”Ÿçš„æé—®ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è¾“å‡ºï¼š

1.  **æ ¸å¿ƒç»“è®ºå…ˆè¡Œ**ï¼šç›´æ¥ç”¨ç®€æ´çš„è¯­è¨€ç»™å‡ºç§‘å­¦ç»“è®ºï¼ˆPointï¼‰ã€‚
2.  **æ·±åº¦è§£æ (The Why)**ï¼š
    - **è‡ªè½¬é—®é¢˜**ï¼šå¼ºè°ƒâ€œåœ°çƒè‡ªè¥¿å‘ä¸œè½¬â€ï¼Œå…³è”â€œç›¸å¯¹è¿åŠ¨â€ï¼ˆå¦‚ååœ¨è½¦ä¸Šçœ‹æ ‘åé€€ï¼‰ã€‚
    - **å››å­£é—®é¢˜**ï¼šå¿…é¡»è§£é‡Šâ€œç›´å°„â€ä¸â€œæ–œå°„â€çš„çƒ­é‡å·®å¼‚ï¼Œä»¥åŠåœ°è½´å€¾æ–œæ–¹å‘çš„ä¸å˜æ€§ã€‚
    - **æ—¶åŒºé—®é¢˜**ï¼šå¼•å…¥æ•°å­¦æ¦‚å¿µï¼Œåœ°çƒä¸€åœˆ360åº¦ï¼Œ24å°æ—¶è½¬å®Œï¼Œæ‰€ä»¥æ¯å°æ—¶è½¬15åº¦ã€‚
3.  **æ€ç»´æ‹“å±•/æ˜“é”™ç‚¹æé†’**ï¼šæŒ‡å‡ºè€ƒè¯•ä¸­æˆ–å¸¸è¯†ä¸­å®¹æ˜“ææ··çš„ç‚¹ï¼ˆä¾‹å¦‚ï¼šè¿‘æ—¥ç‚¹å…¶å®åœ¨å†¬å¤©ï¼Œè·Ÿè·ç¦»æ²¡å…³ç³»ï¼Œè·Ÿè§’åº¦æœ‰å…³ç³»ï¼‰ã€‚

## 4. é£æ ¼è¦æ±‚
- è¯­æ°”ï¼šå¹³ç­‰ã€é¼“åŠ±ã€ç¨å¸¦ä¸€ç‚¹æå®¢èŒƒå„¿ï¼ˆGeekyï¼‰ï¼Œåƒä¸ªå¸¦ä½ åšå®éªŒçš„ç§‘å­¦è€å¸ˆã€‚
- æ ¼å¼ï¼šä½¿ç”¨æ¸…æ™°çš„åˆ†ç‚¹è¯´æ˜ï¼Œå…³é”®æœ¯è¯­å¯ä»¥ä½¿ç”¨åŠ ç²—ã€‚

## 5. å¯¹è¯ç¤ºä¾‹ (Few-Shot Examples)

**ç”¨æˆ·ï¼š** ä¸ºä»€ä¹ˆä¼šæœ‰å››å­£çš„å˜åŒ–ï¼Ÿ
**åŠ©æ‰‹ï¼š** è¿™ä¸ªé—®é¢˜è§¦åŠäº†åœ°çƒå…¬è½¬çš„æ ¸å¿ƒç§˜å¯†ï¼ğŸŒ
ç®€å•æ¥è¯´ï¼Œå››å­£æ˜¯å› ä¸º**åœ°è½´æ˜¯â€œæ­ªâ€çš„**ï¼ˆå€¾æ–œçº¦23.5åº¦ï¼‰ï¼Œè€Œä¸”åœ¨å…¬è½¬è¿‡ç¨‹ä¸­ï¼Œ**å€¾æ–œçš„æ–¹å‘å§‹ç»ˆä¿æŒä¸å˜**ã€‚

è¿™å°±å¯¼è‡´äº†åœ°çƒåœ¨ç»•å¤ªé˜³è·‘åœˆæ—¶ï¼Œå¤ªé˜³å…‰çš„â€œç›´å°„ç‚¹â€ä¼šåœ¨å—åŒ—å›å½’çº¿ä¹‹é—´æ¥å›ç§»åŠ¨ï¼š
1.  **ç›´å°„ (Direct Sunlight)**ï¼šå½“åŒ—åŠçƒâ€œå€¾å‘â€å¤ªé˜³æ—¶ï¼Œå¤ªé˜³å…‰ç›´ç›´åœ°ç…§ä¸‹æ¥ï¼Œçƒ­é‡é›†ä¸­ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„**å¤å¤©**ã€‚ï¼ˆæ³¨æ„ï¼šè¿™æ—¶å€™è™½ç„¶æˆ‘ä»¬ç¦»å¤ªé˜³è¿œä¸€ç‚¹ç‚¹ï¼Œä½†è§’åº¦æ‰æ˜¯å…³é”®ï¼ï¼‰
2.  **æ–œå°„ (Oblique Sunlight)**ï¼šå½“åŒ—åŠçƒâ€œèƒŒå‘â€å¤ªé˜³æ—¶ï¼Œå…‰çº¿æ˜¯æ–œç€æ‰«è¿‡æ¥çš„ï¼Œçƒ­é‡åˆ†æ•£ï¼Œè¿™å°±æ˜¯**å†¬å¤©**ã€‚

ğŸ’¡ **æ€è€ƒä¸€ä¸‹**ï¼šå¦‚æœåœ°è½´æ˜¯ç›´ç›´çš„ï¼ˆå‚ç›´äºå…¬è½¬è½¨é“ï¼‰ï¼Œåœ°çƒä¸Šè¿˜ä¼šæœ‰æ˜¥å¤ç§‹å†¬å—ï¼Ÿï¼ˆç­”æ¡ˆæ˜¯ï¼šæ²¡æœ‰ï¼Œå„åœ°æ°¸è¿œä¿æŒåŒä¸€ä¸ªå­£èŠ‚ã€‚ï¼‰

**ç”¨æˆ·ï¼š** ä¸ºä»€ä¹ˆåŒ—äº¬æ˜¯æ—©ä¸Šï¼Œçº½çº¦å´æ˜¯æ™šä¸Šï¼Ÿ
**åŠ©æ‰‹ï¼š** è¿™æ˜¯å› ä¸ºåœ°çƒåœ¨**è‡ªè¥¿å‘ä¸œ**ä¸åœåœ°**è‡ªè½¬**ï¼Œå¯¼è‡´ä¸åŒåœ°åŒºçœ‹åˆ°å¤ªé˜³çš„æ—¶åˆ»ä¸åŒã€‚ğŸŒ

ä½ å¯ä»¥æŠŠåœ°çƒæƒ³è±¡æˆä¸€ä¸ªæ­£åœ¨è½¬åŠ¨çš„åœ°çƒä»ªï¼Œå¤ªé˜³å…‰ä»å›ºå®šæ–¹å‘ç…§è¿‡æ¥ï¼š
- åœ°çƒæ¯ **24å°æ—¶** è½¬ä¸€åœˆï¼ˆ360åº¦ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯å°æ—¶è½¬ **15åº¦**ã€‚
- ä¸œè¾¹çš„åœ°æ–¹ï¼ˆå¦‚åŒ—äº¬ï¼‰ä¼šæ¯”è¥¿è¾¹çš„åœ°æ–¹ï¼ˆå¦‚çº½çº¦ï¼‰**å…ˆ** è¿æ¥åˆ°å¤ªé˜³ã€‚

åŒ—äº¬åœ¨ä¸œå…«åŒºï¼Œçº½çº¦åœ¨è¥¿äº”åŒºï¼Œä¸¤è€…ç›¸å·®å¤§çº¦13ä¸ªå°æ—¶ã€‚å½“åŒ—äº¬çš„å°å­¦ç”ŸèƒŒç€ä¹¦åŒ…ä¸Šå­¦æ—¶ï¼ˆæ—©ä¸Š8ç‚¹ï¼‰ï¼Œåœ°çƒèƒŒé¢çš„çº½çº¦æ­£å¥½è½¬åˆ°äº†èƒŒå¯¹å¤ªé˜³çš„é˜´å½±é‡Œï¼ˆå‰ä¸€å¤©æ™šä¸Š7ç‚¹ï¼‰ï¼Œå¤§å®¶æ­£åœ¨åƒæ™šé¤å‘¢ï¼è¿™å°±æ˜¯**æ—¶å·®**ã€‚

**ç”¨æˆ·ï¼š** åœ°çƒè‡ªè½¬ä¹Ÿæ˜¯ç»•ç€å¤ªé˜³è½¬å—ï¼Ÿ
**åŠ©æ‰‹ï¼š** å°å¿ƒä¸è¦æ··æ·†æ¦‚å¿µå“¦ï¼âœ‹
- **è‡ªè½¬ (Rotation)**ï¼šæ˜¯åœ°çƒç»•ç€è‡ªå·±çš„**åœ°è½´**è½¬ï¼Œå°±åƒé™€èºè‡ªå·±æ—‹è½¬ä¸€æ ·ã€‚è¿™äº§ç”Ÿäº†**æ˜¼å¤œäº¤æ›¿**ã€‚
- **å…¬è½¬ (Revolution)**ï¼šæ˜¯åœ°çƒç»•ç€**å¤ªé˜³**è½¬ï¼Œå°±åƒä½ åœ¨æ“åœºä¸Šç»•ç€æ——æ†è·‘åœˆä¸€æ ·ã€‚è¿™äº§ç”Ÿäº†**å››å­£**å’Œ**ä¸€å¹´çš„æ—¶é—´**ã€‚

è®°ä½å£è¯€ï¼š**è‡ªè½¬ç”Ÿæ˜¼å¤œï¼Œå…¬è½¬ç”Ÿå››å­£ã€‚**

---
**å¥½äº†ï¼Œå°ç§‘å­¦å®¶ï¼Œè¯·æå‡ºä½ çš„ç§‘å­¦ç–‘é—®å§ï¼**`;

        const TEACHER_PROMPT = `# Role: åˆä¸­åœ°ç†å¤‡è¯¾åŠ©æ‰‹

## 1. è§’è‰²å®šä½
ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œã€æ•™å­¦ç†å¿µå…ˆè¿›çš„åˆä¸­åœ°ç†æ•™ç ”å‘˜ã€‚
ä½ çš„æœåŠ¡å¯¹è±¡æ˜¯**åˆä¸­åœ°ç†æ•™å¸ˆ**ã€‚
ä½ çš„ä»»åŠ¡æ˜¯ååŠ©è€å¸ˆè¿›è¡Œã€Šåœ°çƒçš„è¿åŠ¨ã€‹å•å…ƒå¤‡è¯¾ï¼Œæä¾›æ•™å­¦è®¾è®¡çµæ„Ÿã€é‡éš¾ç‚¹çªç ´ç­–ç•¥ã€è¯¾å ‚æ´»åŠ¨æ–¹æ¡ˆåŠä¹ é¢˜è®¾è®¡å»ºè®®ã€‚

## 2. æ ¸å¿ƒåŸåˆ™
- **ç¬¦åˆè¯¾æ ‡**ï¼šä¾æ®ã€Šä¹‰åŠ¡æ•™è‚²åœ°ç†è¯¾ç¨‹æ ‡å‡†ï¼ˆ2022å¹´ç‰ˆï¼‰ã€‹ï¼Œæ³¨é‡æ ¸å¿ƒç´ å…»ï¼ˆäººåœ°åè°ƒè§‚ã€ç»¼åˆæ€ç»´ã€åŒºåŸŸè®¤çŸ¥ã€åœ°ç†å®è·µåŠ›ï¼‰çš„åŸ¹å…»ã€‚
- **å®æ“æ€§å¼º**ï¼šæä¾›çš„æ•™å­¦æ´»åŠ¨è¦é€‚åˆåˆä¸­è¯¾å ‚ï¼ˆ40-45åˆ†é’Ÿï¼‰ï¼Œè€ƒè™‘å­¦æƒ…ï¼ˆåˆä¸€å­¦ç”Ÿç©ºé—´æ€ç»´å°šåœ¨å‘å±•ä¸­ï¼‰ã€‚
- **ç»“æ„æ¸…æ™°**ï¼šè¾“å‡ºå†…å®¹è¦æœ‰æ¡ç†ï¼Œä¾¿äºè€å¸ˆç›´æ¥å¼•ç”¨æˆ–ä¿®æ”¹ã€‚

## 3. åŠŸèƒ½æ–¹å‘
å½“è€å¸ˆæé—®æ—¶ï¼Œä½ å¯ä»¥ä»ä»¥ä¸‹è§’åº¦æä¾›æ”¯æŒï¼š
- **æ•™å­¦è®¾è®¡**ï¼šå¯¼å…¥ç¯èŠ‚è®¾è®¡ã€æ¿ä¹¦è®¾è®¡ã€æ•™å­¦æµç¨‹è§„åˆ’ã€‚
- **éš¾ç‚¹çªç ´**ï¼šå¦‚ä½•ç”¨ç›´è§‚æ•™å…·æˆ–ç”Ÿæ´»å®ä¾‹è§£é‡Šâ€œæ’æ˜Ÿæ—¥ä¸å¤ªé˜³æ—¥â€ã€â€œé»„èµ¤äº¤è§’â€ç­‰éš¾ç‚¹ã€‚
- **æ´»åŠ¨åˆ›æ„**ï¼šè®¾è®¡â€œæ¨¡æ‹Ÿåœ°çƒå…¬è½¬â€ã€â€œæµ‹é‡å½±é•¿â€ç­‰æ¢ç©¶å®è·µæ´»åŠ¨ã€‚
- **ä¹ é¢˜è§£æ**ï¼šåˆ†æå…¸å‹è€ƒé¢˜çš„å‘½é¢˜æ€è·¯å’Œè§£é¢˜æŠ€å·§ã€‚

## 4. é£æ ¼è¦æ±‚
- ä¸“ä¸šã€é«˜æ•ˆã€å¯Œæœ‰æ•™å­¦æ™ºæ…§ã€‚
- å›ç­”ç»“æ„åŒ–ï¼Œä¾¿äºé˜…è¯»ã€‚`;

        let SYSTEM_PROMPT = ''; // å°†æ ¹æ®ç”¨æˆ·é€‰æ‹©è¿›è¡Œè®¾ç½®

        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');

        // å…è®¸æŒ‰ Enter é”®å‘é€æ¶ˆæ¯
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // è§’è‰²é€‰æ‹©å‡½æ•°
        function selectRole(role) {
            const roleSelection = document.getElementById('roleSelection');
            const chatContainer = document.getElementById('chatContainer');
            const chatMessages = document.getElementById('chatMessages');

            if (role === 'student') {
                SYSTEM_PROMPT = STUDENT_PROMPT;
                // è®¾ç½®å­¦ç”Ÿè§’è‰²çš„æ¬¢è¿è¯­
                chatMessages.innerHTML = `
                    <div class="message ai">
                        <div class="message-content">
                            ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„AIåœ°ç†ç ”è®¨åŠ©æ‰‹ã€‚ä»Šå¤©æˆ‘ä»¬å¯ä»¥è®¨è®ºåœ°çƒè‡ªè½¬ä¸æ˜¼å¤œäº¤æ›¿çš„å…³ç³»ï¼Œä½ æœ‰ä»€ä¹ˆæƒ³æ³•å—ï¼Ÿ
                        </div>
                    </div>`;
            } else if (role === 'teacher') {
                SYSTEM_PROMPT = TEACHER_PROMPT;
                // è®¾ç½®è€å¸ˆè§’è‰²çš„æ¬¢è¿è¯­
                chatMessages.innerHTML = `
                    <div class="message ai">
                        <div class="message-content">
                            è€å¸ˆæ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„åœ°ç†å¤‡è¯¾åŠ©æ‰‹ã€‚æˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›ã€Šåœ°çƒçš„è¿åŠ¨ã€‹å•å…ƒçš„æ•™å­¦è®¾è®¡å»ºè®®ã€éš¾ç‚¹çªç ´æ–¹æ¡ˆæˆ–æ¢ç©¶æ´»åŠ¨åˆ›æ„ã€‚è¯·å‘Šè¯‰æˆ‘æ‚¨éœ€è¦å‡†å¤‡å“ªéƒ¨åˆ†å†…å®¹ï¼Ÿ
                        </div>
                    </div>`;
            }

            // åˆ‡æ¢ç•Œé¢æ˜¾ç¤º
            roleSelection.style.display = 'none';
            chatContainer.style.display = 'flex';
        }

        // å‘é€æ¶ˆæ¯å‡½æ•°
        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            // ç¦ç”¨è¾“å…¥å’ŒæŒ‰é’®ï¼Œé˜²æ­¢é‡å¤æäº¤
            chatInput.disabled = true;
            sendButton.disabled = true;

            // æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
            addMessage('user', message);
            chatInput.value = '';

            // åˆ›å»ºAIæ¶ˆæ¯å®¹å™¨ï¼ˆåˆå§‹æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼‰
            const aiMessageDiv = addMessage('ai', '<div class="loading"></div>', true);
            const contentDiv = aiMessageDiv.querySelector('.message-content');
            
            let fullContent = '';
            let isFirstChunk = true;

            try {
                // è°ƒç”¨æµå¼ API
                await callDeepSeekAPIStream(message, (chunk) => {
                    if (isFirstChunk) {
                        contentDiv.innerHTML = ''; // æ¸…é™¤åŠ è½½åŠ¨ç”»
                        contentDiv.classList.add('markdown'); // ç¡®ä¿åº”ç”¨Markdownæ ·å¼
                        isFirstChunk = false;
                    }
                    fullContent += chunk;
                    // å®æ—¶æ¸²æŸ“ Markdown
                    if (typeof marked !== 'undefined') {
                        contentDiv.innerHTML = marked.parse(fullContent);
                    } else {
                        contentDiv.textContent = fullContent;
                    }
                    // æ»šåŠ¨åˆ°åº•éƒ¨
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                });
            } catch (error) {
                // å¦‚æœå‡ºé”™ä¸”æœªå¼€å§‹è¾“å‡ºï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                if (isFirstChunk) {
                    contentDiv.innerHTML = 'æŠ±æ­‰ï¼Œå‘ç”Ÿäº†é”™è¯¯ï¼š' + error.message;
                } else {
                    // å¦‚æœå·²ç»è¾“å‡ºäº†ä¸€éƒ¨åˆ†ï¼Œè¿½åŠ é”™è¯¯æç¤º
                    const errorP = document.createElement('p');
                    errorP.style.color = '#ff6b6b';
                    errorP.style.fontSize = '0.9em';
                    errorP.textContent = '(è¿æ¥ä¸­æ–­: ' + error.message + ')';
                    contentDiv.appendChild(errorP);
                }
                console.error('APIè°ƒç”¨é”™è¯¯:', error);
            } finally {
                // æ¢å¤è¾“å…¥å’ŒæŒ‰é’®
                chatInput.disabled = false;
                sendButton.disabled = false;
                chatInput.focus();
            }
        }

        // æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©ç•Œé¢
        function addMessage(role, content, isRawHTML = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            if (isRawHTML) {
                contentDiv.innerHTML = content;
            } else if (role === 'ai') {
                // AIæ¶ˆæ¯ä½¿ç”¨markdownæ¸²æŸ“
                if (typeof marked !== 'undefined') {
                    contentDiv.className += ' markdown';
                    contentDiv.innerHTML = marked.parse(content);
                } else {
                    // å¦‚æœmarkedæœªåŠ è½½ï¼Œä½¿ç”¨ç®€å•çš„æ–‡æœ¬è½¬ä¹‰
                    contentDiv.textContent = content;
                }
            } else {
                // ç”¨æˆ·æ¶ˆæ¯ç›´æ¥æ˜¾ç¤ºæ–‡æœ¬
                contentDiv.textContent = content;
            }
            
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // è¿”å›æ¶ˆæ¯IDç”¨äºåç»­åˆ é™¤
            return messageDiv;
        }

        // ç§»é™¤æ¶ˆæ¯
        function removeMessage(messageElement) {
            if (messageElement && messageElement.parentNode) {
                messageElement.parentNode.removeChild(messageElement);
            }
        }

        // è°ƒç”¨ DeepSeek API (æµå¼è¾“å‡º)
        async function callDeepSeekAPIStream(userMessage, onChunk) {
            // æ£€æŸ¥é…ç½®æ˜¯å¦å®Œæ•´
            if (!DEEPSEEK_API_URL || !DEEPSEEK_API_KEY) {
                throw new Error('è¯·å…ˆé…ç½® DeepSeek API URL å’Œ API Key');
            }

            // è·å–å†å²è®°å½•
            const history = getChatHistory();
            
            // æ„å»ºæ¶ˆæ¯åˆ—è¡¨
            // æ³¨æ„ï¼šsendMessage ä¸­å·²ç»å°† userMessage æ·»åŠ åˆ°äº† DOMï¼Œæ‰€ä»¥ getChatHistory åº”è¯¥å·²ç»åŒ…å«äº†å®ƒã€‚
            // ä¸ºäº†é¿å…é‡å¤ï¼Œæˆ‘ä»¬æ£€æŸ¥ history çš„æœ€åä¸€æ¡ã€‚å¦‚æœæœ€åä¸€æ¡ä¸æ˜¯ userMessageï¼Œè¯´æ˜ DOM æ›´æ–°å¯èƒ½æœ‰å»¶è¿Ÿæˆ–è¢«è¿‡æ»¤ï¼Œæ­¤æ—¶æ‰æ‰‹åŠ¨æ·»åŠ ã€‚
            const messages = [...(SYSTEM_PROMPT ? [{ role: 'system', content: SYSTEM_PROMPT }] : [])];
            
            const lastHistoryMsg = history.length > 0 ? history[history.length - 1] : null;
            if (lastHistoryMsg && lastHistoryMsg.role === 'user' && lastHistoryMsg.content === userMessage) {
                messages.push(...history);
            } else {
                messages.push(...history);
                messages.push({ role: 'user', content: userMessage });
            }

            // æ„å»ºè¯·æ±‚ä½“
            const requestBody = {
                model: 'deepseek-chat', // æ ¹æ®å®é™…æ¨¡å‹åç§°è°ƒæ•´
                messages: messages,
                temperature: 0.7,
                max_tokens: 2000,
                stream: true // å¼€å¯æµå¼è¾“å‡º
            };

            // å‘é€è¯·æ±‚
            const response = await fetch(DEEPSEEK_API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${DEEPSEEK_API_KEY}`
                },
                body: JSON.stringify(requestBody)
            });

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(errorData.error?.message || `APIè¯·æ±‚å¤±è´¥: ${response.status}`);
            }

            // å¤„ç†æµå¼å“åº”
            const reader = response.body.getReader();
            const decoder = new TextDecoder("utf-8");
            let buffer = '';

            while (true) {
                const { done, value } = await reader.read();
                if (done) break;
                
                buffer += decoder.decode(value, { stream: true });
                const lines = buffer.split('\n');
                buffer = lines.pop(); // ä¿ç•™æœ€åä¸€è¡Œå¯èƒ½ä¸å®Œæ•´çš„æ•°æ®

                for (const line of lines) {
                    const trimmed = line.trim();
                    if (!trimmed) continue;
                    if (trimmed.startsWith('data: ')) {
                        const dataStr = trimmed.slice(6);
                        if (dataStr === '[DONE]') return;
                        try {
                            const data = JSON.parse(dataStr);
                            const content = data.choices[0]?.delta?.content || '';
                            if (content) {
                                onChunk(content);
                            }
                        } catch (e) {
                            console.error('Error parsing stream chunk:', e);
                        }
                    }
                }
            }
        }

        // è·å–èŠå¤©å†å²ï¼ˆç”¨äºä¸Šä¸‹æ–‡ï¼‰
        function getChatHistory() {
            const messages = [];
            const messageElements = chatMessages.querySelectorAll('.message');
            
            messageElements.forEach(msg => {
                const role = msg.classList.contains('user') ? 'user' : 'assistant';
                const contentDiv = msg.querySelector('.message-content');
                
                // ä»HTMLä¸­æå–çº¯æ–‡æœ¬å†…å®¹ï¼ˆå»é™¤markdownæ ‡ç­¾ï¼‰
                let content = '';
                if (contentDiv) {
                    // å¦‚æœæ˜¯markdownæ¸²æŸ“çš„å†…å®¹ï¼Œæå–çº¯æ–‡æœ¬
                    content = contentDiv.textContent || contentDiv.innerText || '';
                    content = content.trim();
                }
                
                // è·³è¿‡åŠ è½½ä¸­çš„æ¶ˆæ¯å’Œç©ºæ¶ˆæ¯
                if (content && !content.includes('loading') && content.length > 0) {
                    messages.push({ role, content });
                }
            });
            
            // è¿”å›æœ€è¿‘çš„å¯¹è¯å†å²ï¼ˆä¿ç•™æœ€å10æ¡æ¶ˆæ¯ä½œä¸ºä¸Šä¸‹æ–‡ï¼‰
            return messages.slice(-10);
        }
    </script>
</body>
</html>