---
layout: false
---
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>æ°´èµ„æºä¼˜åŒ–è®¾è®¡èµ›</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Microsoft YaHei", sans-serif;
    }
    body {
      background: #f0f7ff;
      color: #2c3e50;
      padding: 15px;
    }
    .header {
      text-align: center;
      background: linear-gradient(135deg, #1976d2, #2196f3);
      color: white;
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .panel {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    h2 {
      color: #0288d1;
      margin-bottom: 16px;
      font-size: 18px;
    }
    .data-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px dashed #e0e0e0;
    }

    /* æ¨¡æ‹Ÿå†œç”°åŒºåŸŸ */
    #field {
      position: relative;
      width: 100%;
      height: 320px;
      background: 
        linear-gradient(rgba(232, 245, 233, 0.8) 1px, transparent 1px),
        linear-gradient(90deg, rgba(232, 245, 233, 0.8) 1px, transparent 1px);
      background-size: 20px 20px;
      border: 2px solid #4caf50;
      border-radius: 8px;
      cursor: pointer;
      overflow: hidden;
    }
    #field::before {
      content: "ğŸ‡ æ¨¡æ‹Ÿè‘¡è„å›­ï¼ˆ100m Ã— 100mï¼‰";
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.85);
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 14px;
      color: #333;
    }
    .dripper-point {
      position: absolute;
      width: 12px;
      height: 12px;
      background: #f44336;
      border: 2px solid white;
      border-radius: 50%;
      box-shadow: 0 0 6px rgba(0,0,0,0.4);
      transform: translate(-50%, -50%);
    }

    .controls {
      margin-top: 15px;
    }
    button {
      background: #2196f3;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      margin-right: 8px;
      transition: background 0.2s;
    }
    button:hover {
      background: #1976d2;
    }
    .report {
      margin-top: 20px;
      padding: 15px;
      background: #e3f2fd;
      border-radius: 8px;
      line-height: 1.5;
    }
    .highlight {
      color: #d32f2f;
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="header">
  <h1>æ°´èµ„æºä¼˜åŒ–è®¾è®¡èµ›</h1>
  <p style="margin-top: 6px; opacity: 0.9;">ğŸ’§ æ–°ç–†èŠ‚æ°´çŒæº‰ä¼˜åŒ–ç³»ç»Ÿï¼ˆç¦»çº¿æ¨¡æ‹Ÿç‰ˆï¼‰</p>
</div>

<div class="container">
  <!-- å·¦ä¾§ï¼šæ•°æ®ä¸æ“ä½œ -->
  <div class="panel">
    <h2>ğŸ“Š å½“åœ°å†œä¸šç”¨æ°´åŸºç¡€æ•°æ®ï¼ˆæ–°ç–†Â·åé²ç•ªï¼‰</h2>
    <div class="data-item">
      <span>å¹´å‡é™é›¨é‡ï¼š</span>
      <span>16 mm</span>
    </div>
    <div class="data-item">
      <span>åœŸå£¤ç±»å‹ï¼š</span>
      <span>ç ‚è´¨å£¤åœŸ</span>
    </div>
    <div class="data-item">
      <span>å½“å‰åœŸå£¤æ¹¿åº¦ï¼š</span>
      <span>12%ï¼ˆåä½ï¼‰</span>
    </div>
    <div class="data-item">
      <span>ä¸»è¦ä½œç‰©ï¼š</span>
      <span>è‘¡è„ï¼ˆéœ€æ°´é‡ 550 mm/å¹´ï¼‰</span>
    </div>
    <div class="data-item">
      <span>ä¼ ç»Ÿæ¼«çŒç”¨æ°´ï¼š</span>
      <span>800 mm/å¹´</span>
    </div>

    <h2>ğŸ› ï¸ æ»´çŒç®¡ç½‘è®¾è®¡</h2>
    <p>ğŸ‘‰ åœ¨å³ä¾§ <strong>æ¨¡æ‹Ÿè‘¡è„å›­</strong> ä¸­ç‚¹å‡»æ·»åŠ æ»´çŒç‚¹ï¼ˆè¦†ç›–åŠå¾„ 15 ç±³ï¼‰</p>
    <div class="controls">
      <button id="clearBtn">ğŸ—‘ï¸ æ¸…é™¤æ»´çŒç‚¹</button>
      <button id="autoBtn">ğŸ¤– è‡ªåŠ¨ç”Ÿæˆå¸ƒå±€</button>
      <button id="resetBtn">ğŸ”„ é‡ç½®ç³»ç»Ÿ</button>
    </div>

    <div class="report" id="simulationReport">
      <p>ğŸ“Œ å°šæœªå¸ƒç½®æ»´çŒç‚¹ï¼Œè¯·åœ¨è‘¡è„å›­ä¸­ç‚¹å‡»æ·»åŠ ã€‚</p>
    </div>
  </div>

  <!-- å³ä¾§ï¼šæ¨¡æ‹Ÿè‘¡è„å›­ -->
  <div class="panel">
    <h2>ğŸŒ æ¨¡æ‹Ÿè‘¡è„å›­ï¼ˆ100m Ã— 100mï¼‰</h2>
    <div id="field"></div>
  </div>
</div>

<script>
  // å‰ç«¯é€»è¾‘ä¿æŒä¸å˜
  const field = document.getElementById('field');
  const fieldSize = { width: 100, height: 100 }; // çœŸå®å°ºå¯¸ï¼ˆç±³ï¼‰
  const pixelSize = field.clientHeight; // åƒç´ é«˜åº¦ï¼ˆå‡è®¾æ­£æ–¹å½¢ï¼‰
  let drippers = [];
  const dripRadiusMeters = 15;

  // ç‚¹å‡»æ·»åŠ æ»´çŒç‚¹
  field.addEventListener('click', (e) => {
    const rect = field.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    // è½¬æ¢ä¸ºçœŸå®åæ ‡ï¼ˆ0~100 ç±³ï¼‰
    const realX = (x / rect.width) * fieldSize.width;
    const realY = (y / rect.height) * fieldSize.height;

    addDripper(realX, realY, x, y);
    runSimulation();
  });

  function addDripper(realX, realY, pixelX, pixelY) {
    const point = document.createElement('div');
    point.className = 'dripper-point';
    point.style.left = `${pixelX}px`;
    point.style.top = `${pixelY}px`;
    point.dataset.realX = realX;
    point.dataset.realY = realY;
    field.appendChild(point);
    drippers.push({ realX, realY, element: point });
  }

  function clearAll() {
    drippers.forEach(d => d.element.remove());
    drippers = [];
  }

  function resetSystem() {
    clearAll();
    document.getElementById('simulationReport').innerHTML = '<p>ğŸ“Œ å°šæœªå¸ƒç½®æ»´çŒç‚¹ï¼Œè¯·åœ¨è‘¡è„å›­ä¸­ç‚¹å‡»æ·»åŠ ã€‚</p>';
  }

  // æŒ‰é’®ç»‘å®š
  document.getElementById('clearBtn').addEventListener('click', () => {
    clearAll();
    document.getElementById('simulationReport').innerHTML = '<p>ğŸ“Œ å°šæœªå¸ƒç½®æ»´çŒç‚¹ï¼Œè¯·åœ¨è‘¡è„å›­ä¸­ç‚¹å‡»æ·»åŠ ã€‚</p>';
  });

  document.getElementById('autoBtn').addEventListener('click', () => {
    clearAll();
    // ç”Ÿæˆ 3x3 ç½‘æ ¼ï¼ˆé—´è·çº¦ 33 ç±³ï¼‰
    const positions = [
      [16.7, 16.7], [50, 16.7], [83.3, 16.7],
      [16.7, 50],   [50, 50],   [83.3, 50],
      [16.7, 83.3], [50, 83.3], [83.3, 83.3]
    ];
    const rect = field.getBoundingClientRect();
    positions.forEach(([rx, ry]) => {
      const px = (rx / 100) * rect.width;
      const py = (ry / 100) * rect.height;
      addDripper(rx, ry, px, py);
    });
    runSimulation();
  });

  document.getElementById('resetBtn').addEventListener('click', resetSystem);

  // æ¨¡æ‹Ÿè®¡ç®—
  function runSimulation() {
    if (drippers.length === 0) return;

    const fieldArea = 100 * 100; // mÂ²
    const dripAreaPer = Math.PI * dripRadiusMeters * dripRadiusMeters;
    const totalCovered = Math.min(fieldArea, drippers.length * dripAreaPer);
    const coveragePct = (totalCovered / fieldArea * 100).toFixed(1);

    const traditionalWater = 0.8;
    const dripWater = 0.55;
    const savingRate = ((traditionalWater - dripWater) / traditionalWater * 100).toFixed(1);
    const waterSaved_m3 = (traditionalWater - dripWater) * fieldArea;
    const costSaving = (waterSaved_m3 * 0.8).toFixed(0);

    let recommendation = '';
    if (coveragePct < 70) {
      recommendation = 'âš ï¸ è¦†ç›–ä¸è¶³ï¼å»ºè®®å¢åŠ æ»´çŒç‚¹å¯†åº¦ï¼Œç¡®ä¿ä½œç‰©æ ¹åŒºå……åˆ†æ¹¿æ¶¦ã€‚';
    } else if (coveragePct > 95) {
      recommendation = 'âœ… è¦†ç›–å……åˆ†ï¼Œä½†å¯èƒ½å­˜åœ¨å†—ä½™ã€‚å¯å¾®è°ƒé—´è·ä»¥é™ä½æˆæœ¬ã€‚';
    } else {
      recommendation = 'ğŸŒŸ è¦†ç›–åˆç†ï¼å½“å‰å¸ƒå±€å…¼é¡¾èŠ‚æ°´ä¸å‡åŒ€æ€§ï¼Œæ¨èé‡‡ç”¨ã€‚';
    }

    document.getElementById('simulationReport').innerHTML = `
      <p><strong>ğŸŒ± æ¨¡æ‹Ÿç»“æœï¼ˆ100mÃ—100m è‘¡è„å›­ï¼‰</strong></p>
      <p>â€¢ æ»´çŒç‚¹æ•°é‡ï¼š<span class="highlight">${drippers.length}</span></p>
      <p>â€¢ æœ‰æ•ˆè¦†ç›–é¢ç§¯ï¼š<span class="highlight">${coveragePct}%</span></p>
      <p>â€¢ å¹´èŠ‚æ°´ç‡ï¼š<span class="highlight">${savingRate}%</span></p>
      <p>â€¢ å¹´èŠ‚çº¦æ°´é‡ï¼š<span class="highlight">${waterSaved_m3.toFixed(0)} mÂ³</span></p>
      <p>â€¢ å¹´æˆæœ¬èŠ‚çº¦ï¼š<span class="highlight">Â¥${costSaving}</span></p>
      <p><strong>ğŸ’¡ æœ€ä½³çŒæº‰æ–¹æ¡ˆæ¨èï¼š</strong><br>${recommendation}</p>
    `;
  }
</script>

</body>
</html>