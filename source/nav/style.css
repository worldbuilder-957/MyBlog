:root {
            /* 配色方案：极简黑白灰 (Keep风格) */
            --bg-color: #f5f5f7;
            --card-bg: #ffffff;
            --text-main: #1d1d1f;
            --text-sub: #86868b;
            --accent: #0071e3; /* 克莱因蓝强调色 */
            --shadow: 0 4px 20px rgba(0,0,0,0.05);
            --radius: 24px;
        }

        /* 黑暗模式自动适配 (可选) */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #000000;
                --card-bg: #1c1c1e;
                --text-main: #f5f5f7;
                --text-sub: #86868b;
            }
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Bento Grid 布局核心 */
        .container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 分为4列 */
            grid-template-rows: repeat(4, auto);   /* 自动行高 */
            gap: 20px;
            margin-top: 37.5vh;                    /* 初始顶部间距，给背景留空间 */
            transition: margin-top 0.3s ease;
            position: relative;
            z-index: 1;
        }

        /* 通用卡片样式 */
        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            transition: transform 0.2s;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .card:hover {
            transform: translateY(-2px);
        }

        /* ----- 各个模块的具体布局 ----- */

        /* 1. 搜索栏  */
        .search-box {
            grid-column: span 4;                /*位置定义，占据第一行，跨4列*/
            display: flex !important;           /* 强制使用 flex 布局 */
            flex-direction: row;                /*强制水平排列*/
            align-items: center;                /*关键：确保垂直居中*/
            background: var(--card-bg);
            border-radius: 50px;                /* 圆角更大 */
            height: 64px;                       /*给出一个固定高度*/
            padding: 0 24px;                    /*去掉上下内边距，只留左右*/
        }
        .search-box i { 
            font-size: 1.4rem; 
            color: var(--text-sub); 
            margin-right: 12px;
            display: flex;                      /* 让图标自身也是个容器，防止基线对齐问题 */
            align-items: center;
            height: 100%;                       /* 撑满高度 */
        }
        .search-box input {
            border: none;
            background: transparent;
            font-size: 1.2rem;
            width: 100%;
            height: 100%;        /* 关键：让输入框高度撑满父容器 */
            outline: none;
            color: var(--text-main);
            padding: 0;          /* 关键：强制去掉输入框默认的内边距 */
            margin: 0;           /* 关键：强制去掉外边距 */
            line-height: normal; /* 关键：重置行高 */
        }

        /* 2. 时钟卡片 */
        .card.time-card {
            grid-column: span 2;
            grid-row: span 2;                                        /* 定义2x2 大方块 */
            justify-content: center;
            align-items: center;
            text-align: center;
            background-image: url('/images/shanghai_loadmap.jpg');   /* 图片背景：后跟图片链接，也可以是网图，给出链接即可 */
            background-size: cover;                                  /* 关键命令：cover (让图片等比例缩放填满盒子，像裁剪一样) */
            background-position: center;                             /* 关键命令：center (永远显示图片的正中心) */
    
            /* 加上遮罩层，防止图片太花看不清字 */
            box-shadow: inset 0 0 0 2000px rgba(71, 79, 97, 0.609); 

            color: rgb(255, 255, 255);
            text-shadow: 0 4px 10px rgba(0,0,0,0.5);

            background-color: transparent;   /* 保险措施，以防card背景干扰显示图片 */
        }
        .clock { font-size: 4rem; font-weight: 700; letter-spacing: -2px;}
        .date { font-size: 1.2rem; color: var(--text-sub); margin-top: 10px;}

        /* 确保时钟卡片是定位基准 */
        .card.time-card {
            position: relative;           /* 这一行至关重要！没有它，文字会飞到页面角落去 */
        }

        /* 角落文字通用样式 */
        .corner-text {
            position: absolute;                        /* 绝对定位：脱离文档流 */
            font-size: 0.9rem;                         /* 字号稍微小一点 */
            font-style: italic;                        /* 关键：设置为斜体 */
            font-weight: 600;                          /* 半粗体，更有质感 */
            color: rgba(255, 255, 255, 0.85);        /* 稍微透明一点的白色 */
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);  /* 黑色阴影，防止在地图亮色区域看不清 */
            letter-spacing: 0.5px;
            font-family: 'Segoe UI', sans-serif;       /* 稍微换个字体增加区分度 */
        }

        /* 右上角定位 */
        .corner-text.top-right {
            top: 20px;
            right: 24px;
        }

        /* 右下角定位 */
        .corner-text.bottom-right {
            bottom: 20px;
            right: 24px;
            color: rgba(255, 255, 255, 0.85);           /* 稍微透明一点的白色 */
        }


        /* 3. 待办事项 (1x2 竖长条) */
        .todo-card {
            grid-column: span 1;
            grid-row: span 2;
        }
        .card-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;}
        .todo-list { list-style: none; padding: 0; margin: 0; overflow-y: auto; flex: 1;}
        .todo-item { display: flex; align-items: center; padding: 8px 0; border-bottom: 1px solid rgba(0,0,0,0.05);}
        .todo-item input { margin-right: 10px; }
        .todo-input { width: 100%; padding: 10px; border: 1px solid var(--text-sub); border-radius: 8px; margin-top: 10px; background: transparent; color: var(--text-main);}

        /* 4. 天气卡片 (1x1) */
        .weather-card {
            grid-column: span 1;
            grid-row: span 1;
    
            display: flex;
            justify-content: space-between; /* 左右分开 */
            align-items: center;
            padding: 24px; /* 恢复内边距 */
    
            /* 给个渐变背景，模拟天空 */
            background: linear-gradient(120deg, #89f7fe 0%, #66a6ff 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .weather-info {
            z-index: 2; /* 确保文字在上面 */
        }

        .temp {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 5px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .meta {
            font-size: 0.9rem;
            opacity: 0.9;
            display: flex;
            gap: 5px;
        }

        /* 右侧巨大的装饰图标 */
        .weather-icon {
            font-size: 4rem;
            opacity: 0.8;
            transform: rotate(-10deg); /* 稍微歪一点，比较俏皮 */
            text-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        /* 5. 股票卡片 (1x1) */
        .stock-card { grid-column: span 1; grid-row: span 1; }

        /* 6. 快捷方式 (跨4列) */
        .links-card {
            grid-column: span 4;
            flex-direction: row;
            justify-content: space-around;
            align-items: center;
            padding: 30px;
        }
        .link-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-main);
            gap: 10px;
            transition: opacity 0.2s;
        }
        .link-item:hover { opacity: 0.7; }
        .link-icon {
            width: 50px; height: 50px;
            background: #f0f0f0;
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
        }

        /* 手机端适配 */
        @media (max-width: 768px) {
            .container { grid-template-columns: 1fr; margin-top: 15vh; } /* 手机上一列展示 */
            .search-box, .time-card, .todo-card, .weather-card, .stock-card, .links-card { grid-column: span 1; grid-row: auto; }
            .links-card { flex-wrap: wrap; gap: 20px;}
        }

        /* 强制修正日期颜色 */
        .card.time-card .date {
        /* 1. 把颜色改成纯白 (带一点点透明度看起来更有质感) */
        color: rgba(255, 255, 255, 0.9) !important;
    
        /* 2. 关键：给文字加黑描边/阴影 */
        /* 既然背景是复杂的地图，必须加阴影，否则字压在白色道路上会看不见 */
        text-shadow: 0 1px 3px rgba(0,0,0,0.8);
    
        /* 3. 稍微加粗一点点，更清晰 */
        font-weight: 500;
        }

        /* ----- 待办事项升级版样式 ----- */

        /* 1. 顶部工具栏 */
        .icon-btn {
            background: none; border: none; cursor: pointer;
            font-size: 1.2rem; color: var(--accent); padding: 4px;
            border-radius: 50%; transition: background 0.2s;
        }
        .icon-btn:hover { background: rgba(0,0,0,0.05); }

        /* 2. 搜索框 */
        .todo-filter {
            display: flex; align-items: center;
            background: rgba(0,0,0,0.03);
            padding: 8px 12px; border-radius: 8px; margin-bottom: 10px;
        }
        .todo-filter i { color: var(--text-sub); margin-right: 8px; font-size: 0.9rem;}
        .todo-filter input {
            border: none; background: transparent; width: 100%;
            font-size: 0.9rem; color: var(--text-main); outline: none;
        }

        /* 3. 复杂任务条目 */
        .todo-item {
            flex-direction: column !important; /* 改为垂直排列 */
            align-items: flex-start !important;
            padding: 12px 0 !important;
            gap: 6px;
        }
        .todo-header {
            display: flex; align-items: center; width: 100%; gap: 10px;
        }
        .todo-text { flex: 1; font-weight: 500; font-size: 0.95rem; }
        .todo-text.done { text-decoration: line-through; color: var(--text-sub); }

        /* 4. 任务元数据 (日期、地点) */
        .todo-meta {
            display: flex; gap: 12px; font-size: 0.75rem; color: var(--text-sub);
            padding-left: 24px; /* 对齐复选框后的文字 */
        }
        .meta-tag { display: flex; align-items: center; gap: 4px; }

        /* 5. 标签胶囊 (Tag Pills) */
        .tags-row {
            display: flex; gap: 6px; padding-left: 24px; flex-wrap: wrap;
        }
        .tag {
            font-size: 0.7rem; padding: 2px 8px; border-radius: 4px;
            background: #e3f2fd; color: #1976d2; /* 默认蓝色系 */
        }
        /* 给“紧急”标签特殊颜色 */
        .tag[data-name="紧急"] { background: #ffebee; color: #c62828; }
        .tag[data-name="GIS"] { background: #e8f5e9; color: #2e7d32; }

        /* ----- 弹窗 (Dialog) 样式 ----- */
        .modal {
            border: none; border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            padding: 0; width: 90%; max-width: 400px;
            background: var(--card-bg); color: var(--text-main);
        }
        .modal::backdrop { background: rgba(0,0,0,0.4); backdrop-filter: blur(2px); }
        .modal-content { padding: 24px; display: flex; flex-direction: column; gap: 16px; }
        .modal h3 { margin: 0; display: flex; align-items: center; gap: 8px;}

        .form-group { display: flex; flex-direction: column; gap: 6px; }
        .form-row { display: flex; gap: 10px; }
        .form-group label { font-size: 0.8rem; color: var(--text-sub); font-weight: 600;}
        .form-group input {
            padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;
            background: var(--bg-color); color: var(--text-main); outline: none;
        }
        .form-group input:focus { border-color: var(--accent); }

        .modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px;}
        .btn { padding: 8px 16px; border-radius: 8px; cursor: pointer; border: none; font-weight: 600;}
        .btn.primary { background: var(--text-main); color: var(--card-bg); }
        .btn.secondary { background: transparent; color: var(--text-sub); }

        /* ----- 顶部横幅背景 (Banner) ----- */
        .top-banner-bg {
            /* 1. 绝对定位：让它脱离文档流，浮在最上面 */
            position: fixed; /* 使用 fixed 可以让背景在滚动时固定不动，视觉效果更好 */
            top: 0;
            left: 0;
            width: 100%;
            height: 50vh; /* 高度设为屏幕高度的 50%，你可以根据需要调整 (例如 400px) */
            z-index: -1;  /* 关键！层级设为负数，让它乖乖呆在内容文字的后面 */
            pointer-events: none;    /* 让鼠标事件穿透，避免遮挡点击 */

            /* 2. 设置背景图片 */
            /* ⚠️ 请把这里的路径换成你自己的图片路径 */
            background-image: url('banner.webp'); 
            background-size: cover;      /* 确保图片撑满整个区域，不变形 */
            background-position: center top; /* 图片对齐方式：居中且靠上 */
            filter: saturate(150%) contrast(110%) brightness(1.0);
            transform: scale(1.05);
            background-repeat: no-repeat;

            opacity: 0.9;           /* 0.9 的透明度，稍微淡化一点 */

            /* 3. 核心科技：渐变蒙版 (Magic Mask) */
            /* 原理：蒙版中黑色的部分可见，透明的部分不可见。*/
            /* 下面的代码表示：从顶部开始到 85% 的位置是完全可见的，然后慢慢渐变到 100% 的位置完全透明。*/
            -webkit-mask-image: linear-gradient(to bottom, black 0%, black 15%, transparent 100%);
            mask-image: linear-gradient(to bottom, black 0%, black 15%, transparent 100%);
        }

        /* 配合调整：为了让背景不被 body 的背景色遮挡 */
        body {
            background-color: var(--bg-color);            /* 保持背景色 */
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0; 
            padding: 20px;
            min-height: 100vh;
            display: flex; 
            justify-content: center; /* 水平依然居中 */
            align-items: flex-start; /* 现在改成 flex-start (顶部对齐) */

            position: relative;
            z-index: 0;
        }

        /* 如果黑暗模式下背景太亮，可以加一个遮罩层 */
        @media (prefers-color-scheme: dark) {
            .top-banner-bg::after {
                content: '';
                position: absolute;
                top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.4); /* 盖一层半透明黑色 */
            }
        }
